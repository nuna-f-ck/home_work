# Проект "Приложение для анализа банковских операций"

## Описание
Приложение для анализа транзакций, которые находятся в Excel-файле. 
Приложение генерирует JSON-данные для веб-страниц, формирует отчеты, а также предоставляет другие сервисы. 

### Описание модулей
Excel-файл с транзакциями хранится в модуле data.

В пакете src находятся модули с функциями:

Основные функции для генерации JSON-ответов реализованы в отдельном модуле views.
Данные для анализа и вывода на веб-страницах — это данные с начала месяца, на который выпадает входящая дата, по входящую дату.
Валюты и акции для отображения на веб-страницах заданы в отдельном файле пользовательских настроек user_settings.json.

Сервис для определения выгодных категорий повышенного кэшбека реализован в модуле services. В дальнейшем, возможно, будут добавлены и другие сервисы.
Сервис позволяет проанализировать, какие категории были наиболее выгодными для выбора в качестве категорий повышенного кешбэка.

Функция для формирования отчета трат по категориям реализована в модуле reports. В дальнейшем, возможно, будут добавлены и другие отчеты.
Функция возвращает траты по заданной категории за последние три месяца .

Для функций отчетов также написан декоратор. Он находится в модуле decorators. Декоратор записывает сформированный отчет в файл.

В модуле utils расположены вспомогательные функции для чтения файлов.

В модуле external_api находятся функции для получения данных о валютах и акциях через Open API *api.apilayer.com* и *api.polygon.io*

В пакете tests находятся тесты на функции основного функционала.

В файле logging_config реализован логгер, который используется в функциях, выполняющих основной функционал.

Финальным модулем проекта выступает **main**,

## Разработка

### Установка
1. Клонируйте репозиторий
```commandline
https://github.com/et2133gii80/bank.git

```
2. Установите зависимости
```commandline
poetry install
```

### Конфигурационные файлы

В проекте есть файлы конфигурации, в которых находятся переменные для записи в них путей к файлам и других параметров.
В файле **.env.example** хранится API-ключ. Создайте файл .env из копии этого файла и замените значения переменных реальными данными.
В файле **settings** находятся универсальные пути к файлам логирования, а также к файлам с информацией о банковских транзакциях.

### Тестирование 
Проект покрыт юнит-тестами Pytest.

Чтобы запустить тесты с оценкой покрытия выполните команду:
```commandline
poetry run pytest --cov
```
Чтобы сгенерировать отчет о покрытии в HTML-формате, где src — пакет c модулями, которые тестируем. 
Отчет будет сгенерирован в папке htmlcov и храниться в файле с названием index.html.
```commandline
pytest --cov=src --cov-report=html
```
### Логирование
Логирование корректной работы функции и возникающих ошибок реализовано в модулях masks и utils. Лог-файлы создаются в директории logs.

 
 
